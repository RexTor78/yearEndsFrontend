<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trivial Villa</title>
  <link rel="stylesheet" href="../css/styles-pages.css" />
</head>
<body>
  <div class="container">
    <h1>Trivia Villa</h1>
    <p>Responde correctamente para avanzar.</p>

    <div id="triviaContainer">
      <h2 id="questionTitle">Cargando pregunta...</h2>
      <ul id="answersList" style="list-style: none; padding: 0;"></ul>
      <p id="triviaStatus"></p>
      <button id="nextBtn" style="display:none; width: 100%; padding: 12px; margin-top: 20px; cursor: pointer; background-color: #3498db; color: white; border: none; border-radius: 8px;">Siguiente Pregunta</button>
    </div>
  </div>

  <script>
    const questions = [
      {
        question: "Â¿CuÃ¡l es la pelÃ­cula de animaciÃ³n donde un robot limpia la Tierra mientras los humanos viven en el espacio?",
        answers: ["Wall-E", "Up", "Frozen", "Shrek"],
        correct: 0
      },
      {
        question: "Â¿En quÃ© aÃ±o consiguiÃ³ Sant Feliu de Codines su decreto de emancipaciÃ³n de Caldes?",
        answers: ["1895", "1799", "1902", "1550"],
        correct: 1
      },
      {
        question: "Â¿QuÃ© personaje de Pixar tiene un sombrero de vaquero?",
        answers: ["Buzz Lightyear", "Woody", "Lightning McQueen", "Mike Wazowski"],
        correct: 1
      },
      {
        question: "Â¿CuÃ¡l de estos es un ingrediente tradicional de la crema catalana?",
        answers: ["Canela", "Chocolate", "Menta", "Fresa"],
        correct: 0
      },
      {
        question: "Â¿CÃ³mo se llama el perro de la familia?",
        answers: ["Max", "Toby", "Rocky", "Nala"],
        correct: 3
      },
      {
        question: "Â¿CuÃ¡l es el color favorito del anfitriÃ³n?",
        answers: ["Azul", "Verde", "Rojo", "Amarillo"],
        correct: 0
      },
      {
        question: "Â¿QuÃ© ciudad visitÃ³ la familia en sus Ãºltimas vacaciones?",
        answers: ["Londres", "ParÃ­s", "Roma", "Nueva York"],
        correct: 1
      },
      {
        question: "Â¿CuÃ¡ntos aÃ±os cumple la abuela este aÃ±o?",
        answers: ["70", "75", "80", "85"],
        correct: 2
      },
      {
        question: "Â¿CuÃ¡l es el plato estrella de las reuniones familiares?",
        answers: ["Paella", "Canelones", "Barbacoa", "Sushi"],
        correct: 1
      },
      {
        question: "Â¿QuÃ© deporte practica el hijo mayor?",
        answers: ["FÃºtbol", "Baloncesto", "Tenis", "NataciÃ³n"],
        correct: 0
      },
      {
        question: "Â¿CuÃ¡l es la serie favorita que todos ven juntos?",
        answers: ["Stranger Things", "Friends", "The Crown", "La Casa de Papel"],
        correct: 1
      },
      {
        question: "Â¿En quÃ© mes se celebra el aniversario de los padres?",
        answers: ["Mayo", "Junio", "Septiembre", "Diciembre"],
        correct: 2
      },
      {
        question: "Â¿QuÃ© instrumento musical hay en el salÃ³n?",
        answers: ["Guitarra", "Piano", "ViolÃ­n", "Flauta"],
        correct: 1
      },
      {
        question: "Â¿CuÃ¡l es la tradiciÃ³n principal de esta noche?",
        answers: ["Cantar", "Bailar", "Hacer la Trivia", "Dormir pronto"],
        correct: 2
      }
    ];

    let currentIndex = 0;

    function renderQuestion() {
      const qTitle = document.getElementById("questionTitle");
      const aList = document.getElementById("answersList");
      const tStatus = document.getElementById("triviaStatus");
      const nBtn = document.getElementById("nextBtn");

      aList.innerHTML = "";
      tStatus.innerText = "";
      nBtn.style.display = "none";

      if (currentIndex >= questions.length) {
        showFinalMessage();
        return;
      }

      const currentQ = questions[currentIndex];
      qTitle.innerText = currentQ.question;

      currentQ.answers.forEach((ans, idx) => {
        const li = document.createElement("li");
        const btn = document.createElement("button");
        btn.innerText = ans;
        btn.style.width = "100%";
        btn.style.margin = "8px 0";
        btn.style.padding = "12px";
        btn.style.cursor = "pointer";
        
        btn.onclick = () => {
          const allButtons = aList.querySelectorAll("button");
          allButtons.forEach(b => b.disabled = true);

          if (idx === currentQ.correct) {
            tStatus.innerHTML = "<b style='color: #2ecc71;'>âœ… Â¡Correcto!</b>";
          } else {
            tStatus.innerHTML = `<b style='color: #e74c3c;'>âŒ Incorrecto.</b>`;
          }
          nBtn.style.display = "block";
        };
        
        li.appendChild(btn);
        aList.appendChild(li);
      });
    }

    function showFinalMessage() {
      document.getElementById("questionTitle").innerText = "ğŸ‰ Â¡Trivia Completada!";
      document.getElementById("answersList").innerHTML = "";
      document.getElementById("triviaStatus").innerText = "Â¡Bienvenidos a la villa! Redirigiendo...";
      document.getElementById("nextBtn").style.display = "none";
      
      setTimeout(() => {
        window.location.href = "celebration.html";
      }, 3000);
    }

    document.getElementById("nextBtn").onclick = () => {
      currentIndex++;
      renderQuestion();
    };

    window.onload = renderQuestion;
  </script>
</body>
</html>