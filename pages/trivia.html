<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trivial Villa - Corregido</title>
  <link rel="stylesheet" href="css/styles-pages.css" /> </head>
<body>
  <div class="container">
    <h1>Trivia Villa</h1>
    <p>Responde correctamente para avanzar a la celebraci√≥n.</p>

    <div id="triviaContainer">
      <h2 id="questionTitle"></h2>
      <ul id="answersList" style="list-style: none; padding: 0;"></ul>
      <p id="triviaStatus"></p>
      <button id="nextBtn" class="hidden">Siguiente Pregunta</button>
    </div>
  </div>

  <script>
    const questions = [
      {
        question: "¬øCu√°l es la pel√≠cula de animaci√≥n donde un robot limpia la Tierra?",
        answers: ["Wall-E", "Up", "Cars", "Coco"],
        correct: 0 // Wall-E es correcto
      },
      {
        question: "¬øEn qu√© a√±o se separ√≥ Sant Feliu de Codines de Caldes de Montbui (Villamayor)?",
        answers: ["1895", "1793", "1902", "1550"],
        correct: 1 // 1793 es el a√±o hist√≥rico de la segregaci√≥n
      },
      {
        question: "¬øQu√© personaje de Toy Story tiene un sombrero de vaquero?",
        answers: ["Buzz Lightyear", "Rex", "Woody", "Slinky"],
        correct: 2 // Woody es correcto
      }
    ];

    let currentIndex = 0;
    const questionTitle = document.getElementById("questionTitle");
    const answersList = document.getElementById("answersList");
    const triviaStatus = document.getElementById("triviaStatus");
    const nextBtn = document.getElementById("nextBtn");

    function showQuestion() {
      const q = questions[currentIndex];
      questionTitle.innerText = q.question;
      answersList.innerHTML = "";
      triviaStatus.innerText = "";
      nextBtn.classList.add("hidden");

      q.answers.forEach((ans, idx) => {
        const li = document.createElement("li");
        const btn = document.createElement("button");
        btn.innerText = ans;
        btn.style.width = "100%";
        btn.style.margin = "5px 0";
        btn.onclick = () => checkAnswer(idx);
        li.appendChild(btn);
        answersList.appendChild(li);
      });
    }

    function checkAnswer(selected) {
      const q = questions[currentIndex];
      const buttons = answersList.querySelectorAll("button");
      
      // Bloquear botones tras elegir
      buttons.forEach(b => b.disabled = true);

      if (selected === q.correct) {
        triviaStatus.innerText = "‚úÖ ¬°Correcto!";
        triviaStatus.style.color = "#22c55e";
        nextBtn.classList.remove("hidden");
      } else {
        triviaStatus.innerText = `‚ùå Incorrecto. Era: ${q.answers[q.correct]}`;
        triviaStatus.style.color = "#ff4444";
        // Permitir reintentar tras un segundo si falla
        setTimeout(() => {
            buttons.forEach(b => b.disabled = false);
        }, 1000);
      }
    }

    nextBtn.addEventListener("click", () => {
      currentIndex++;
      if (currentIndex >= questions.length) {
        questionTitle.innerText = "üéâ ¬°Trivia Completada!";
        answersList.innerHTML = "";
        triviaStatus.innerText = "Cargando celebraci√≥n...";
        // REDIRECCI√ìN SEGURA
        setTimeout(() => {
            window.location.href = "celebration.html";
        }, 1500);
      } else {
        showQuestion();
      }
    });

    showQuestion();
  </script>
</body>
</html>